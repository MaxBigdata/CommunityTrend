# community trend
#
# This is an example function named 'trend'
# which prints community trend.
#
# You can learn more about package authoring with RStudio at:
#
#   http://r-pkgs.had.co.nz/
#
# Some useful keyboard shortcuts for package authoring:
#
#   Build and Reload Package:  'Cmd + Shift + B'
#   Check Package:             'Cmd + Shift + E'
#   Test Package:              'Cmd + Shift + T'

trend <- function(community_name_x)) {
  library(dplyr)

  print("Hello, friend ,I am max!")

  # consul <- new.env()
  # consul$host = Sys.getenv("consul.host")
  # consul$port = Sys.getenv("consul.port")
  # consul$swagger = Sys.getenv("consul.swagger")
  #
  # #connect the library 'laputas'
  # fcast <- est_mysql_conn("Forecast")
  #
  # data1=head(DBI::dbListTables(fcast), 10)

  community_attributes <- read.csv('R/community_attributes.csv')

  write.table(community_attributes,"R/community_attributes.dat")
  dat_file<-read.table("R/community_attributes.dat")

  the_attributes<-community_attributes%>%
    filter(community_name == community_name_x)

  print('-------------------------------------')
  print('过去一个月内自如：')
  print(paste0("所在商圈",business_district))

  print(paste0("当地商圈合租单间销量：",the_attributes$community_other_num))
  print(paste0("社区合租单间均价：",the_attributes$community_average_price))
  print(paste0("社区合租单间平均面积：",the_attributes$community_other_area))
  print(paste0("社区合租单间平均楼层：",the_attributes$community_average_floor))
  print(paste0("社区合租单位面积价格：",the_attributes$community_average_AreaPrice))
  print('')
  print(paste0("当地商圈合租单间销量：",the_attributes$business_district_other_num))
  print(paste0("当地商圈合租单间均价：",the_attributes$business_district_average_price))
  print(paste0("当地商圈合租单间平均面积：",the_attributes$business_district_other_area))
  print(paste0("当地商圈合租单间平均楼层：",the_attributes$business_district_average_floor))
  print(paste0("当地商圈合租单间单位面积价格：",the_attributes$business_district_average_AreaPrice))

  print('-------------------------------------')
  #return(the_attributes)
  # DBI::dbDisconnect(fcast)

}
